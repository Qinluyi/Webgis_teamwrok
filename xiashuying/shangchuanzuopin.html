<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" content="Ask online Form">
    <meta name="description" content="The Ask is a bootstrap design help desk, support forum website template coded and designed with bootstrap Design, Bootstrap, HTML5 and CSS. Ask ideal for wiki sites, knowledge base sites, support forum sites">
    <meta name="keywords" content="HTML, CSS, JavaScript,Bootstrap,js,Forum,webstagram ,webdesign ,website ,web ,webdesigner ,webdevelopment">
    <meta name="robots" content="index, nofollow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/editor.css" rel="stylesheet" type="text/css">
    <!-- <link href="css/animate.css" rel="stylesheet" type="text/css"> -->
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css"> </head>
    <link href="css/responsive.css" rel="stylesheet" type="text/css"> </head>

<body>
    <div class="container-top">
        <div class="navbar-top">
          
          <nav>
            <ul>
            <li class="dropdown-top">
                <a href="category.html" class="nav_text_big">苗绣社区</a>
            </li>
            <li class="dropdown-top">
                <a href="../html/WalkIn.html" class="nav_text_big">苗绣商城</a>
            </li>
            <li>
              <a href="../html/periphery.html" class="nav_text_big">苗绣周边</a>
            </li>
            <li>
              <a href="" class="nav_text_big">产业概览</a>
            </li>

            </ul>
          </nav>
          <a href="../html/logIn.html">
            <img src="../imgs/登录.png" class="menu-icon-top shopcar"/>
          </a> 
          <a href="../html/购物车.html">
              <img src="../imgs/_购物车.png" class="menu-icon-top shopcar"/>
          </a> 

        </div>
      </div>
    
    <script>
        window.onload = function() {
            alert('您可以先点击下方的"获取地址"按钮获取当前位置信息！')
        }
    </script>
    <section class="header-descriptin329">
        <div class="container">
            <h3>上传作品</h3>
            <ol class="breadcrumb breadcrumb839">
                <li><a href="#">主页</a></li>
                <li class="active">上传作品</li>
            </ol>
        </div>
    </section>
    <section class="main-content920">
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                <div class="ask-question-input-part032">
                      <h4>作品信息</h4>
                 <hr>
                    <form>
                        <div class="username-part940">
                            <span class="form-description43">作品id* </span><input type="text" name="fname" class="username029" id="enterid" placeholder="请输入作品编号">  
     </div>
                    <div class="username-part940">
                        <span class="form-description43">发布者* </span><input type="text" name="fname" class="username029" id="enterauthor" placeholder="输入作者编号">  
 </div>
 <div class="categori49">
    <span class="form-description43305">寓意* </span>
    <label>
<input list="categories" id="entermeaning" name="mymeaning" placeholder="请选择" class="list-category53"/></label>
<datalist id="categories">
    <option value="吉祥富贵">
    <option value="长寿">
    <option value="吉祥">
    <option value="消灾辟邪">
    <option value="祥瑞">
    <option value="家和万事兴">
    <option value="比翼双飞">
  </datalist>  
</div>


<!-- <div class="question-title39">
    <span class="form-description433">非遗种* </span><input type="text" name="fname" class="question-ttile32" id="entercate" placeholder="Write Your Question Title">
</div> -->
    
<div class="categori49">
    <span class="form-description433056">非遗种*</span>
    <label>
<input list="feiyicate" id="entercate" name="myfeiyi"  placeholder="请选择" class="list-category53"/></label>
<datalist id="feiyicate">
    <option value="湘西苗绣">
    <option value="雷山苗绣">
    <option value="松桃苗绣">
    <option value="剑河苗绣">
  </datalist>  
</div>


    <div class="categori49">
        <span class="form-description43305">类别* </span>
        <label>
<input list="browsers" id="entercatenum" placeholder="请选择" name="myBrowser" class="list-category53"/></label>
<datalist id="browsers">
    <option value="1">
    <option value="2">
    <option value="3">
    </datalist>
  </div>

<!-- 添加一个空白行 -->
<div style="margin-bottom: 35px;"></div>
  <div class="username-part940">
    <span class="form-description433111">品牌* </span><input type="text" name="fname" class="username029" id="enterbrand" placeholder="输入作品品牌">  
</div>
<div class="username-part940">
    <span class="form-description433111">名字* </span><input type="text" name="fname" class="username029" id="entername" placeholder="输入作品名称">  
</div>
    <div class="button-group-addfile3239">
        <span class="form-description23993">图片*</span><input type="file" name="ffile" class="question-ttile3226" id='upload' onchange="getFile(value)">  
    </div>

    <script>
        function getFile(value){
        // 获取上传控件dom
        var picname = document.getElementById('upload').files[0].name;
        // 获取文件路径
        console.log(name);
    }
    </script>


<!-- <span class="form-description23993">描述</span>
       <div class="details2-239">
        <div class="col-md-12 nopadding">
            <textarea id="txtEditor"></textarea> 
        </div>
        </div>	 -->

        <div class="username-part940">
            <span class="form-description433">描述 </span><input type="text" name="fname" class="username029" id="txtEditor" placeholder="作品描述">  
</div>
<div class="username-part940">
    <span class="form-description433111">纬度* </span><input type="text" name="latitudename" class="username029" id="enterlatitude" placeholder="自动识别当前纬度">  
</div>
<div class="username-part940">
    <span class="form-description433111">经度* </span><input type="text" name="latitudename" class="username029" id="enterlongtitude" placeholder="自动识别当前经度">  
</div>
<div class="username-part940">
    <span class="form-description433112">行政编码* </span><input type="text" name="latitudename" class="username029" id="enteradcode" placeholder="自动识别当前行政编码">  
</div>
<div class="username-part940">
    <span class="form-description433111">地区* </span><input type="text" name="latitudename" class="username029" id="enterdistrict" placeholder="自动识别当前地区">  
</div>
</form>
<div class="publish-button2389">
    <button type="button" id="redirect" class="publis1291" onclick="redirectToNewPage()">获取地址</button>
</div>


                 <div class="publish-button2389">
                    <button type="button" id="puttodb" onclick="alert('作品上传成功，感谢您的参与！')" class="publis1291" >上传作品</button>
                </div>


               
                </div>
             
              
                </div>
<!--                end of col-md-9 -->
           
<!--           strart col-md-3 (side bar)-->
           <aside class="col-md-3 sidebar97239">
             <div class="status-part3821">
            <h4>苗绣社区</h4>
                
                 <a href="./shangchuanzuopin.html"><i class="fa fa-question-circle" aria-hidden="true"> 上传作品</i></a>
                 <a href="./category.html"><i class="fa fa-question-circle" aria-hidden="true"> 苗绣论坛</i></a>
             </div>  
             <div class="categori-part329">
                 <h4>浏览作品</h4>
                 <ul>
                     <li><a href="../html/WalkIn.html">湘西苗绣作品集</a></li>
                     <li><a href="../html/WalkIn.html">雷山苗绣作品集</a></li>
                     <li><a href="../html/WalkIn.html">松桃苗绣作品集</a></li>
                     <li><a href="../html/WalkIn.html">剑河苗绣作品集</a></li>
                     
                 </ul>
             </div>
             
      <!--             social part -->
                     <div class="social-part2189">
                     <h4>人气作品</h4>
                    <li class="rss-one" onclick="go_to_item(5,0)">
                       <!-- <a href="#" target="_blank"> -->
                        <strong>
                           <span>缠绣手提包</span>
                            <!-- <i class="fa fa-rss" aria-hidden="true"></i> -->
                            <!-- <i class="fa fa-house"></i> -->
                            <br>
                            <small>品牌："花溪"，发布者ID: 9</small>
                            
                        </strong>
                        </a>
                    </li>
                    <li class="facebook-two" onclick="go_to_item(346,0)">
                       <!-- <a href="#" target="_blank"> -->
                        <strong>
                           <span>破线绣毛衣</span>
                                <!-- <i class="fa fa-facebook" aria-hidden="true"></i> -->
              
                            <br>
                            <small>品牌："洛书河图"，发布者ID：8</small>
                            
                        </strong>
                        </a>
                    </li>
                    <li class="twitter-three" onclick="go_to_item(356,0)">
                       <!-- <a href="#" target="_blank"> -->
                        <strong>
                           <span>锡绣袜</span>
                       <!-- <i class="fa fa-twitter" aria-hidden="true"></i> -->
              
                            <br>
                            <small>品牌："锦绣黔坤"，发布者ID：99</small>
                            
                        </strong>
                        </a>
                    </li>
                    <li class="youtube-four" onclick="go_to_item(37,0)">
                       <!-- <a href="#" target="_blank"> -->
                        <strong>
                           <span>锡绣毛衣</span>
                      <!-- <i class="fa fa-youtube" aria-hidden="true"></i> -->
              
                            <br>
                            <small>品牌："古阿新"，发布者ID：2</small>
                            
                        </strong>
                        </a>
                    </li>
                         
                     </div>
              
 <!--              login part-->
 <div class="login-part2389">
    <h4>登录</h4>
    <div class="input-group300">
    <span><i class="fa fa-user" aria-hidden="true"></i></span>
    <input type="text" class="namein309" placeholder="输入用户名">
    </div>
        <div class="input-group300">
    <span><i class="fa fa-lock" aria-hidden="true"></i></span>
    <input type="password" class="passin309" placeholder="输入密码">
    </div>
    <a href="#"><button type="button" class="userlogin320">登录</button></a>
    <div class="rememberme">
                  <label><input type="checkbox" checked="checked"> 记住我</label>
                  <a href="#" class="resbutton3892">注册</a>
              </div>
</div>

          
           </aside>
            </div>

        </div>
    </section>
    
<!--    footer -->
   <div class="footer-search">
     <div class="container">
	<div class="row">
           <div id="custom-search-input">
                            <div class="input-group col-md-12">
                               <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                <input type="text" class="  search-query form-control user-control30" placeholder="在这里搜索...." />
                                <span class="input-group-btn">
                                    <button class="btn btn-danger" type="button">
                                        <span class=" glyphicon glyphicon-search"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
	</div>
</div>
   </div>
    
    <section class="footer-part">
        <div class="container">
            <div class="row">
                
                <div class="col-md-3">
                  <div class="info-part-one320">
                   <h4>基本信息</h4>
                    <p>武汉大学遥感信息工程学院《网络GIS实习》第一组</p>
                    <h4>地址 :</h4>
                    <p>湖北省武汉市珞喻路129号武汉大学信息学部 教学实验大楼3楼、6楼—9楼,五号教学楼,宇航科学与技术研究院</p>
                    <h4>联系方式</h4>
                    <p>电话号码: 18986197481</p>
                    <p>邮箱账号 : </p>
                    <p>2021302191847@whu.edu.cn</p>
                    </div>
                </div>
                   <div class="col-md-3">
                  <div class="info-part-two320">
              <h4>快速链接</h4>
                   <a href="../html/WalkIn.html"><p>-主页</p></a>
                     <a href="#"><p>-苗绣社区</p></a>
                     <a href="#"><p>-苗绣商城</p></a>
                     <a href="../html/周边推荐2.html"><p>-周边推荐</p></a>
                     <a href="#"><p>-产业概览</p></a>
                     <a href="shangchuanzuopin.html"><p>-作品上传</p></a>
                     <a href="category.html"><p>-苗绣论坛</p></a>
                    </div>
                </div>
                   <div class="col-md-3">
                  <div class="info-part-three320">
                   <h4>人气作品</h4>
                  <div class="news-info209">
                  
                   <h5>绉绣双肩包（“花溪”）</h5>
                    <p>这幅苗绣作品，凝聚了艺术家卓越的绣艺技巧与独到的创意思维...</p> 
                    <small>2017-7-16</small>
                      </div>
                       <div class="news-info209">
                <h5>破线绣毛衣（“花溪”）</h5>
                    <p>艺术家精湛地运用苗绣传统工艺，将古老的手工技艺与现代审美巧妙融合 ...</p>
                    <small>2019-7-9</small>
                      </div>
                        <div class="news-info209">
                <h5>辫绣手提包（“锦绣黔坤”）</h5>
                    <p>苗绣作品展现了艺术家对大自然的独到感悟，细致入微的绣工勾勒出山水...</p>
                    <small>2023-12-29</small>
                      </div>
                    
                    </div>
                </div>
                   <div class="col-md-3">
                  <div class="info-part-four320">
                   <h4>苗绣论坛</h4>
                   <div class="tweet-details29">
                    <h5>苗绣初体验</h5>
                    <p><i class="fa fa-twitter-square" aria-hidden="true"></i><a href="post-deatils.html"> 苗绣，宛如大地的绚烂花开，细腻而瑰丽，它是苗族文化的精髓 ...</a></p>
                   
                      </div>
                            <div class="tweet-details29">
                    <h5>苗绣非遗</h5>
                    <p><i class="fa fa-twitter-square" aria-hidden="true"></i><a href="miaoxiufeiyi.html">苗族刺绣技艺进入首批国家级保护的非遗保护名录 ...</a></p>
                  
                      </div>
                            <div class="tweet-details29">
                    <h5>苗绣潮牌</h5>
                    <p><i class="fa fa-twitter-square" aria-hidden="true"></i><a href="miaoxiuchaopai.html">走进苗族聚居的贵州，世世代代的苗族人，用绣在服饰上的符号和图案...</a></p>
                     
                      </div>
                      <div class="tweet-details29">
                        <h5>苗绣体验</h5>
                        <p><i class="fa fa-twitter-square" aria-hidden="true"></i><a href="miaoxiutiyan.html">近年来，贵州多地因地制宜，利用自身独特的地理景观...</a></p>
                       
                          </div>
                      <div class="tweet-details29">
                      <h5>苗绣伴手礼</h5>
                      <p><i class="fa fa-twitter-square" aria-hidden="true"></i><a href="miaoxiubanshouli.html">在每个美好的时刻，我想将一份独特的礼物送给你...</a></p>
                     
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<section class="footer-social">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <p>Copyright 2023 苗绣 | <strong>《网络GIS实习》第一组</strong></p>
            </div>
             <div class="col-md-6">
              <div class="social-right2389">
               <a href="#"><i class="fa fa-twitter-square" aria-hidden="true"></i></a>
               <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
               <a href="#"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
               <a href="#"><i class="fa fa-youtube" aria-hidden="true"></i></a>
               <a href="#"><i class="fa fa-skype" aria-hidden="true"></i></a>
               <a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
               <a href="#"><i class="fa fa-rss" aria-hidden="true"></i></a>
                 </div>
            </div>
        </div>
    </div>
</section>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="./js/getUrlParam.js"></script> 
  <!-- <script src="js/editor.js"></script>
   <script>
        $(document).ready(function() {
            $("#txtEditor").Editor();
        });
    </script> -->
    <script>
        function redirectToNewPage() {
            // 使用 window.location.href 修改页面 URL
            window.location.href = "8.html";
        }
    </script>
    <!-- <script type="text/javascript" src="./js/getUrlParam.js"></script> -->
     <script> 
     if(UrlParam.paramValues("latitude")>0)
    {
    var latitude1 = UrlParam.paramValues("latitude"); 
    var longtitude1 = UrlParam.paramValues("longtitude"); 
    var district1= UrlParam.paramValues("district");
    var adcode1= UrlParam.paramValues("adcode");
    console.log(latitude1); 
    console.log(longtitude1); 
    console.log(district1); 
    
        document.getElementById("enteradcode").value = adcode1;
        document.getElementById("enterlatitude").value = latitude1;
        document.getElementById("enterlongtitude").value = longtitude1;
        document.getElementById("enterdistrict").value = district1;
    }
    </script> 
 


<script type="text/javascript">   
// 检查所有单元格是否全部填完整的函数
function checkCompleteness() {
    // 通过逐一检查每个输入框是否为空来判断是否填写完整
    var inputs = ["#enterid", "#enterauthor", "#entermeaning", "#entercate", "#entercatenum", "#enterbrand", "#entername", "#upload", "#enteradcode", "#enterdistrict", "#enterlongtitude", "#enterlatitude"];
    for (var i = 0; i < inputs.length; i++) {
        if ($(inputs[i]).val() === "") {
            return false; // 如果有任何一个输入框为空，返回 false
        }
    }
    return true; // 所有输入框都填写完整，返回 true
}




var my_switch = false;
$(document).ready(function () {
    // 发起对服务器端 /checkConnection 端点的请求
    $.ajax({
        url: 'http://localhost:5000/checkConnection',  // 请替换为你的服务器地址
        type: 'GET',
        dataType: 'json',
        success: function (response) {
            // 根据返回结果设置前端变量
            var my_switch = response.mySwitch;

            // 在这里使用 my_switch，执行你的逻辑
            if (my_switch) {
                console.log('Database connected!');
                $("#puttodb").click(function () {
                     // 检查所有单元格是否全部填完整
    // if (!checkCompleteness()) {
    //     // 如果有未填完整的单元格，弹出提示框
    //     alert("请填写完整");
    //     return; // 阻止执行后续的代码
    // }

        var id = $("#enterid").val();
      var author = $("#enterauthor").val();
                        var meaning = $("#entermeaning").val();
                        var category = $("#entercate").val();
                        var categorynum = $("#entercatenum").val();
                        var brand = $("#enterbrand").val();
                        var name = $("#entername").val();
                        var description = $("#txtEditor").val();
                        var picturePath = $("#upload").val();
                        var picture = picturePath.split(/[\\\/]/).pop();
var adcode=$("#enteradcode").val();
    const ename=$("#enterdistrict").val();
    const longtitude=$("#enterlongtitude").val();
    const latitude=$("#enterlatitude").val();
// var adcode=420100;
//     const ename='洪山区';
//     const longtitude=107;
//     const latitude=21;
    const price=100;
    const ups=0;
    const soldnum=0;
$.ajax({
            url: 'http://localhost:5000/list3',
            type: 'get',
            dataType: 'json',
            data: {
                id:id,
              author: author,
              meaning:meaning,
              category:category,
              categorynum:categorynum,
              brand:brand,
              name:name,
              description:description,
              picture:picture,
              adcode:adcode,
              ename:ename,
              longtitude:longtitude,
              latitude:latitude,
              price:price,
              ups:ups,
              soldnum:soldnum
            }, // Pass the parameter here
            success: function (data) {
              console.log(data);
            }
        });
    });
            }
else
{
    console.log('Database not connected!');
    $("#puttodb").click(function () {
         // 检查所有单元格是否全部填完整
        var id = $("#enterid").val();
        var author = $("#enterauthor").val();
        var meaning = $("#entermeaning").val();
        var category = $("#entercate").val();
        var categorynum = $("#entercatenum").val();
        var brand = $("#enterbrand").val();
        var name = $("#entername").val();
        var description = $("#txtEditor").val();
        var picturePath = $("#upload").val();
        var picture = picturePath.split(/[\\\/]/).pop();
        var adcode = $("#enteradcode").val();
        const ename = $("#enterdistrict").val();
        const longtitude = $("#enterlongtitude").val();
        const latitude = $("#enterlatitude").val();
        const price = 100;
        const ups = 0;
        const soldnum = 0;

        // 构建要写入文件的数据对象
        var newData = {
            id: id,
            author: author,
            meaning: meaning,
            category: category,
            categorynum: categorynum,
            brand: brand,
            name: name,
            description: description,
            picture: picture,
            adcode: adcode,
            ename: ename,
            longtitude: longtitude,
            latitude: latitude,
            price: price,
            ups: ups,
            soldnum: soldnum
        };

        $.ajax({
            url: 'http://localhost:5000/saveData',
            type: 'post',
            contentType: 'application/json',
            data: JSON.stringify(newData),
            success: function (response) {
                console.log(response);
            }
        });
    });
}


    
        },
        error: function () {
            console.log('Database not connected!');
                $("#puttodb").click(function () {
        var id = $("#enterid").val();
        var author = $("#enterauthor").val();
        var meaning = $("#entermeaning").val();
        var category = $("#entercate").val();
        var categorynum = $("#entercatenum").val();
        var brand = $("#enterbrand").val();
        var name = $("#entername").val();
        var description = $("#txtEditor").val();
        var picturePath = $("#upload").val();
        var picture = picturePath.split(/[\\\/]/).pop();
        var adcode = $("#enteradcode").val();
        const ename = $("#enterdistrict").val();
        const longtitude = $("#enterlongtitude").val();
        const latitude = $("#enterlatitude").val();
        const price = 100;
        const ups = 0;
        const soldnum = 0;

        // 构建要写入文件的数据对象
        var newData = {
            id: id,
            author: author,
            meaning: meaning,
            category: category,
            categorynum: categorynum,
            brand: brand,
            name: name,
            description: description,
            picture: picture,
            adcode: adcode,
            ename: ename,
            longtitude: longtitude,
            latitude: latitude,
            price: price,
            ups: ups,
            soldnum: soldnum
        };

        $.ajax({
            url: 'http://localhost:5000/saveData',
            type: 'post',
            contentType: 'application/json',
            data: JSON.stringify(newData),
            success: function (response) {
                console.log(response);
            }
        });
    });
        }
    });
});

function go_to_item(item_id,is_class){
    localStorage.setItem('item_id', item_id);
    localStorage.setItem('item_type', is_class);
    window.location.href = '../html/product.html';
}



</script>
    
  





  
</body>

</html>